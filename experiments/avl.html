<html>
<head>
    <style type="text/css">
        body{
            padding: 0px;
            margin: 0px;
            width: 100%;
            height: 100%;
        }
        #thecanvas{
            border: 1px solid black;
        }
    </style>
    <script type="text/javascript">
        var root;
        var canvas;
        var ctx;

        function insert(root,data){
            if(root==null){
                return {data:data,left:null,right:null};
            }
            if(data<root.data){
                if(root.left != null){
                    insert(root.left,data);
                }else{
                    root.left={data:data,left:null,right:null};
                }
            }else{
                if(root.right != null){
                    insert(root.right,data);
                }else{
                    root.right={data:data,left:null,right:null};
                }
            }
        }

        function build_tree(n){
            root=insert(null,Math.random());
            for(var i=0;i<n;i++){
                insert(root,Math.random()); 
            }
        }

        function onload(e){
            //stretch canvas
            canvas = document.getElementById("thecanvas");
            //canvas.style.width=window.innerWidth+"px";
            //canvas.style.height=window.innerHeight+"px";
            ctx = canvas.getContext("2d");
            ctx.translate(window.innerWidth/4,20); // middle of the top with some padding

            console.log("building tree");
            build_tree(20);
            draw(root,0,0,0);
        } 

        function draw(root,depth,x,y){
            ctx.strokeStyle = "rgba(0,0,0,0.3)";
            ctx.fillStyle = "rgba(0,0,0,1)";
            ctx.save();
            ctx.beginPath();
            ctx.moveTo(0,0);
            ctx.lineTo(x,y);
            ctx.closePath();
            ctx.stroke();
            ctx.translate(x,y);
            ctx.fillStyle="rgba(255,0,0,0.5)";
            ctx.beginPath();
            ctx.arc(0,0,root.data*20,0,Math.PI*2,true); // circle
            ctx.closePath();
            ctx.font = "8pt Arial";
            ctx.fill()
            ctx.fillStyle="Black";
            ctx.fillText(root.data.toFixed(5), 0, 0);  
            if(root.left!=null){
                draw(root.left,depth+1,-30,60);   
            }
            if(root.right!=null){
                draw(root.right,depth+1,30,60);   
            }
            ctx.restore();
        }

        document.addEventListener("DOMContentLoaded", onload, false);
    </script>
</head>
<body>
    <canvas width="800px" height="600px" style="margin: auto;" id="thecanvas" />
</body>
</html>
